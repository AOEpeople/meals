{% extends '::base.html.twig' %}

{% set wrapperClass = 'accounting-book' %}

{% block body %}

    {% set total = 0 %}

    {# Set data for table content #}
    {% set tableContent = [] %}

    {% for user in users %}
        {% set total = total + user.amount %}
        {% set tableContent = tableContent | merge([{
        'name': {
        'content': user.name ~ ", " ~ user.firstName,
        'class': 'name'
        },
        'amount': {
        'content': user.amount | number_format(2) ~ "<i class='glyphicon glyphicon-euro' />",
        'class': 'amount'
        },
        }]) %}
    {% endfor %}

    {% set tableContent = tableContent | merge([{
    'name': {
    'content': 'Total',
    'class': 'table-data-total'
    },
    'amount': {
    'content': total | number_format(2) ~ "<i class='glyphicon glyphicon-euro' />",
    'class': ''
    },
    }]) %}

    {# Start template #}

    {{ MealzHeadline.create(1, heading, '', '', [], '') }}

    {{ MealzTable.create('accounting-book-table', 'table-full-width', [], tableContent) }}

{% endblock %}