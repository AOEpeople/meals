{% extends '::base.html.twig' %}

{% set available = false %}

{% if form.vars.value.day.enabled %}
	{% for meal in form.vars.value.day.meals %}
		{% if meal.dateTime | date_modify(lock_toggle_participation_at) | date('U') > 'now' | date('U') %}
			{% set available = true %}
		{% endif %}
	{% endfor %}
{% endif %}

{% block body %}
<div class="meal {{ available ? 'is-available' : '' }}">

	<div class="week-day">
		<a name="{{ form.vars.value.day.datetime | date('Y-m-d') }}"></a>
        <span>
            {{ form.vars.value.day.datetime | date('D') | trans({}, 'date') }}
        </span>
	</div>


	 {% for meal in form.vars.value.day.meals %}
		 {% include 'MealzMealBundle:Meal/partials:mealGuest.html.twig' with %}
	 {% endfor %}

	{#{{ form(form.profile) }}#}

	{#{{ form_rest(form) }}#}
	{#{% include 'MealzMealBundle:Meal/partials:profile.html.twig' with {'profile': 'form.vars.value.profile'} %}#}

</div>
{% endblock %}
