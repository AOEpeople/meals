{% set dish=meal.dish %}


<div class="col-xs-8">
	<h4 class="h3-no-margin">
		<div class="row"><div class="col-sm-12">{{ dish.title }}</div></div>
		<div class="row"><div class="col-sm-12">
			<small>{{ dish.description }}</small>
		</div></div>
	</h4>
</div>

<div class="col-xs-2">
	{{ meal.participants | length }}
</div>

<div class="col-xs-2">
	{% if is_granted('ROLE_USER') %}
		{% set participant = meal.getParticipant(app.user.profile) %}

		{# join / leave using a checkbox #}
		{% if participant and is_allowed_to_leave(meal) %}
			<input type="checkbox" class="participation-checkbox"
				   value="{{ link(participant, 'delete') }}"
				   checked
				   data-action-type="leave"
			>
		{% else %}
			{% if is_allowed_to_join(meal) %}
				<input type="checkbox"
					   class="participation-checkbox"
					   value="{{ link(meal, 'join') }}"
					   data-action-type="join"
				>
			{% else %}
				<input type="checkbox" class="participation-checkbox disabled" value="">
			{% endif %}
		{% endif %}

	{% else %}
		<input type="checkbox" class="participation-checkbox disabled" value="">
	{% endif %}
</div>