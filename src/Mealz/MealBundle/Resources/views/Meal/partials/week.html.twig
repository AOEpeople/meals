<div class="week">

	{% set headline = 'week.current'|trans({},'general') %}
	{% if 'now' | date('U') < week.startTime | date('U') %}
		{% set headline = 'week.next'|trans({},'general') %}
	{% endif %}

	{% set headlineSub = week.startTime | date('D d.m.') ~ ' - ' ~ week.endTime | date('D d.m.') %}

	{{ MealzHeadline.create(1, headline, '', 'centered', [], headlineSub) }}

	{% if week.mealsCount > 0 %}

		{% for day,meals in week.days %}

			{% set available = false %}

			{% for meal in meals %}
				{% if meal.dateTime | date_modify(lock_toggle_participation_at) | date('U') > 'now' | date('U') %}
					{% set available = true %}
				{% endif %}
			{% endfor %}

			<div class="meal {{ available ? 'is-available' : '' }}">

				{# display week day and date #}
				<div class="week-day">
					<a name="{{ day | date('Y-m-d') }}"></a>
				<span>
					{{ day | date('D') }}
				</span>
				</div>

				{# display meals for given day #}

				{% for meal in meals %}
					{% include 'MealzMealBundle:Meal/partials:meal.html.twig' %}
				{% endfor %}
				{% if meals | length == 1 %}
					<div class="meal-row one-meal">{{ 'no_service'|trans({},'general') }}</div>
				{% elseif meals | length == 0 %}
					<div class="meal-row no-meal">{{ 'no_service'|trans({},'general') }}</div>
				{% endif %}


			</div>
		{% endfor %}

	{% else %}
		{% include 'MealzMealBundle:Meal/partials:noMeals.html.twig' %}
	{% endif %}
</div>