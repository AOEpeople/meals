{% extends '::base.html.twig' %}

{% set noHeader = true %}
{% set wrapperClass = 'print-participations' %}

{% block body %}
        <table class="table">
            <thead class="table-header">
                <tr>
                    <th class="table-head wide-row"></th>
                    {% for day in week.days %}
                    <th class="table-head day" colspan="2">{{ day.dateTime | date('l') }}</th>
                    {% endfor %}
                </tr>
                <tr>
                    <th class="table-head wide-row week-date">
                        <span>{{ week.startTime | date('d.m.') }}-{{ week.endTime | date('d.m.') }}</span>
                    </th>
                    {% for day in week.days %}
                        {% for meal in day.meals %}
                            <th class="table-head meal-title"><span>{{ meal.dish.title }}</span></th>
                        {% endfor %}
                    {% endfor %}
                </tr>
            </thead>

            <tbody class="table-content">
                {% for name, participations in users %}
                    {% set profile = participations[0].profile %}
                    <tr class="table-row">
                        <td class="text table-data wide-row">{{ profile.fullName }}</td>
                        {% for day in week.days %}
                                {% for meal in day.meals %}
                                    {% if isParticipant(participations, meal.participants) %}
                                    <td class="meal-participation participating table-data"></td>
                                    {% else %}
                                    <td class="meal-participation table-data"></td>
                                    {% endif %}
                                {% endfor %}
                        {% endfor %}
                    </tr>
                {% endfor %}
                <tr>
                    <td class="text table-data wide-row">Gesamt</td>
                    {% for day in week.days %}
                            {% for meal in day.meals %}
                                <td class="meal-count text text-center table-data"><span>{{ meal.participants | length }}</span></td>
                            {% endfor %}
                    {% endfor %}
                </tr>
            </tbody>
        </table>
{% endblock %}
